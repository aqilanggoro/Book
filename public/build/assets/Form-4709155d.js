import{k as g,a as r,x as b,W as v,r as x,j as W,T as a,t as I}from"./app-cf1a612d.js";import{B as P}from"./BackofficeLayout-0ad58285.js";import{G as f}from"./Grid-d9a27d0e.js";import{M as S}from"./MenuItem-2e1568e6.js";import"./bootstrap-03a53c9f.js";import"./ArrowBack-947320b4.js";import"./Tooltip-6f8a0eeb.js";import"./dividerClasses-73c3313b.js";const y=g(r("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save"),M=()=>{const{tags:u,book:t}=b().props,s=v({title:t==null?void 0:t.title,author:t==null?void 0:t.author,tag:t==null?void 0:t.tag,pages:t==null?void 0:t.pages,publisher:t==null?void 0:t.publisher,isbn:t==null?void 0:t.isbn,price:t==null?void 0:t.price,description:t==null?void 0:t.description,issue:t==null?void 0:t.issueInp,_method:t?"put":"post"}),{errors:c}=s,n=s.setData;x.useEffect(()=>{if(t&&t.tags.length){const e=u.find(l=>l.name==t.tags[0]);e&&n("tag",e.name)}},[t]);const i=(e,l=!1)=>{const p=c[e],h=!!p;return{name:e,value:l?void 0:s.data[e],helperText:p??"",error:h,onChange(m){const o=m.target;if(console.log(l),s.clearErrors(e),l){console.log(o.files),o.files.length&&n(e,o.files[0]);return}n(e,m.target.value)}}},d=e=>()=>{s.clearErrors("tag"),n("tag",e.name)};return r(P,{back:!0,children:r("form",{onSubmit:e=>{e.preventDefault();const l=t?route("backoffice.book.update",{book:t.id}):route("backoffice.book.store");s.post(l,{forceFormData:!0})},children:r(f,{container:!0,sx:{mt:3},spacing:2,children:W(f,{item:!0,xs:12,md:4,sx:{"& > div":{mb:2}},children:[r(a,{...i("title"),fullWidth:!0,label:"Judul buku"}),r(a,{fullWidth:!0,error:!!c.tag,label:"Kategori",select:!0,value:s.data.tag??u[0].name,children:u.map(e=>r(S,{onClick:d(e),value:e.name,children:e.name},e.id))}),r(a,{...i("author"),fullWidth:!0,label:"Penulis"}),r(a,{...i("pages"),fullWidth:!0,inputProps:{min:0},label:"Halaman",type:"number"}),r(a,{fullWidth:!0,label:"Penerbit",...i("publisher")}),r(a,{fullWidth:!0,label:"ISBN",...i("isbn")}),r(a,{fullWidth:!0,maxRows:8,minRows:5,label:"Deskripsi buku",multiline:!0,...i("description")}),r(a,{fullWidth:!0,InputLabelProps:{shrink:!0},label:"Tanggal terbit",type:"date",...i("issue")}),r(a,{fullWidth:!0,inputProps:{min:0},label:"Harga",type:"number",...i("price")}),r(a,{InputLabelProps:{shrink:!0},fullWidth:!0,label:"Foto",type:"file",...i("thumbnail",!0)}),r(I,{startIcon:r(y,{}),variant:"contained",type:"submit",children:"Simpan"})]})})})})};export{M as default};
